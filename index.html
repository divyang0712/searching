<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search Algorithm Visualizer - Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        :root {
            --bg1: #0d1117;
            --bg2: #161b22;
            --bg3: #21262d;
            --text: #f0f6fc;
            --muted: #8b949e;
            --accent: #58a6ff;
            --compare: #ffa657;
            --found: #3fb950;
            --dead: #484f58;
        }

        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg1);
            color: var(--text);
            line-height: 1.5;
        }

        .container {
            max-width: 1000px;
            margin: auto;
            padding: 2rem 1rem;
        }

        header {
            text-align: center;
            padding: 2rem;
            background: var(--bg2);
            border-radius: 14px;
            margin-bottom: 2rem;
            border: 1px solid var(--bg3);
        }

        .section {
            background: var(--bg2);
            border-radius: 14px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--bg3);
        }

        .section h2 {
            margin-top: 0;
            color: var(--accent);
            font-size: 1.5rem;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        input, button {
            padding: 0.7rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--bg3);
            font-size: 0.95rem;
            outline: none;
        }

        input {
            background: var(--bg3);
            color: white;
            flex-grow: 1;
            min-width: 150px;
        }

        button {
            background: var(--accent);
            color: #000;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s, transform 0.1s;
        }

        button:active { transform: scale(0.98); }

        button.secondary {
            background: var(--bg3);
            color: white;
        }

        button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .speed-box {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: var(--bg2);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .bars {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 250px;
            gap: 8px;
            background: #010409;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1rem;
            overflow: hidden;
        }

        .bar {
            flex: 1;
            max-width: 50px;
            background: var(--accent);
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: background 0.3s, opacity 0.3s;
            display: flex;
            justify-content: center;
        }

        .bar span {
            position: absolute;
            top: -25px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .bar.comparing { background: var(--compare); transform: scaleX(1.1); }
        .bar.found { background: var(--found); }
        .bar.not-found { background: var(--dead); opacity: 0.4; }

        .status {
            font-family: monospace;
            background: rgba(0,0,0,0.2);
            padding: 0.5rem;
            border-radius: 5px;
            color: var(--muted);
        }
    </style>
</head>

<body>
<div class="container">

    <header>
        <h1>Searching Techniques</h1>
        <p style="color:var(--muted)">Compare Sequential vs. Logarithmic Efficiency</p>
    </header>

    <div class="speed-box">
        <span>Animation Speed:</span>
        <input type="range" id="speed" min="1" max="10" value="5">
        <span id="speedVal" style="min-width: 80px;">Normal</span>
    </div>

    <div class="section">
        <h2>Search Search(Linear Search)</h2>
        <div class="controls">
            <input id="linearArray" placeholder="Comma separated (e.g. 40,10,30)">
            <input id="linearKey" type="number" placeholder="Key" style="max-width: 100px;">
            <button onclick="randomLinear()" class="secondary btn-main">Random</button>
            <button onclick="linearSearch()" class="btn-main">Start Search</button>
        </div>
        <div class="status" id="linearStatus">Ready to search...</div>
        <div class="bars" id="linearBars"></div>
    </div>

    <div class="section">
        <h2>Binary Search </h2>
        <div class="controls">
            <input id="binaryArray" placeholder="Must be sorted (e.g. 10,20,30)">
            <input id="binaryKey" type="number" placeholder="Key" style="max-width: 100px;">
            <button onclick="randomBinary()" class="secondary btn-main">Random Sorted</button>
            <button onclick="binarySearch()" class="btn-main">Start Search</button>
        </div>
        <div class="status" id="binaryStatus">Ready to search...</div>
        <div class="bars" id="binaryBars"></div>
    </div>

</div>

<script>
    let delayTime = 600;
    const speed = document.getElementById("speed");
    const speedVal = document.getElementById("speedVal");
    const allButtons = document.querySelectorAll(".btn-main");

    speed.oninput = () => {
        delayTime = 1200 - (speed.value * 110);
        if(speed.value <= 3) speedVal.textContent = "Slow";
        else if(speed.value <= 7) speedVal.textContent = "Normal";
        else speedVal.textContent = "Fast";
    };

    const wait = () => new Promise(r => setTimeout(r, delayTime));

    function toggleButtons(disabled) {
        allButtons.forEach(btn => btn.disabled = disabled);
    }

    function render(arr, box) {
        box.innerHTML = "";
        if (arr.length === 0) return;
        const max = Math.max(...arr);
        arr.forEach(v => {
            const b = document.createElement("div");
            b.className = "bar";
            // Ensure even small numbers are visible (min height 10%)
            const height = (v / max * 80) + 10;
            b.style.height = height + "%";
            b.innerHTML = `<span>${v}</span>`;
            box.appendChild(b);
        });
    }

    function getArrayFromInput(id) {
        const val = document.getElementById(id).value;
        if (!val.trim()) return [];
        return val.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));
    }

    /* LINEAR SEARCH */
    function randomLinear() {
        const arr = Array.from({length: 10}, () => Math.floor(Math.random() * 90 + 10));
        document.getElementById("linearArray").value = arr.join(",");
        render(arr, document.getElementById("linearBars"));
        document.getElementById("linearStatus").textContent = "Random array generated.";
    }

    async function linearSearch() {
        const arr = getArrayFromInput("linearArray");
        const key = parseInt(document.getElementById("linearKey").value);
        const status = document.getElementById("linearStatus");
        const container = document.getElementById("linearBars");

        if (arr.length === 0 || isNaN(key)) {
            alert("Please provide both an array and a search key.");
            return;
        }

        toggleButtons(true);
        render(arr, container);
        const bars = [...container.children];

        for (let i = 0; i < arr.length; i++) {
            bars[i].classList.add("comparing");
            status.textContent = `Checking index ${i}: Is ${arr[i]} == ${key}?`;
            await wait();

            if (arr[i] === key) {
                bars[i].className = "bar found";
                status.textContent = `SUCCESS: Found ${key} at index ${i}!`;
                toggleButtons(false);
                return;
            }
            bars[i].className = "bar not-found";
        }

        status.textContent = "FINISHED: Element not found in list.";
        toggleButtons(false);
    }

    /* BINARY SEARCH */
    function randomBinary() {
        const arr = Array.from({length: 12}, () => Math.floor(Math.random() * 90 + 10)).sort((a, b) => a - b);
        document.getElementById("binaryArray").value = arr.join(",");
        render(arr, document.getElementById("binaryBars"));
        document.getElementById("binaryStatus").textContent = "Sorted array generated.";
    }

    async function binarySearch() {
        const arr = getArrayFromInput("binaryArray");
        const key = parseInt(document.getElementById("binaryKey").value);
        const status = document.getElementById("binaryStatus");
        const container = document.getElementById("binaryBars");

        if (arr.length === 0 || isNaN(key)) {
            alert("Please provide both a sorted array and a search key.");
            return;
        }

        // Validate Sort
        for (let i = 1; i < arr.length; i++) {
            if (arr[i] < arr[i - 1]) {
                alert("Binary Search requires a SORTED array.");
                return;
            }
        }

        toggleButtons(true);
        render(arr, container);
        const bars = [...container.children];

        let low = 0, high = arr.length - 1;

        while (low <= high) {
            let mid = Math.floor((low + high) / 2);
            
            // Highlight current range
            bars.forEach((b, idx) => {
                if(idx < low || idx > high) b.classList.add("not-found");
            });

            bars[mid].className = "bar comparing";
            status.textContent = `Range: [${low} to ${high}] | Checking Middle Index: ${mid}`;
            await wait();

            if (arr[mid] === key) {
                bars[mid].className = "bar found";
                status.textContent = `SUCCESS: Found ${key} at index ${mid}!`;
                toggleButtons(false);
                return;
            }

            if (arr[mid] < key) {
                status.textContent = `${arr[mid]} is too small. Searching RIGHT half...`;
                for (let i = low; i <= mid; i++) bars[i].classList.add("not-found");
                low = mid + 1;
            } else {
                status.textContent = `${arr[mid]} is too large. Searching LEFT half...`;
                for (let i = mid; i <= high; i++) bars[i].classList.add("not-found");
                high = mid - 1;
            }
            await wait();
        }

        status.textContent = "FINISHED: Element not found.";
        toggleButtons(false);
    }
</script>
</body>
</html>
